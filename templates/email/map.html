{% extends 'base.html' %}
{% block footer_scripts %}
	{{block.super}}
{% endblock %}
{% block content %}
<div id="email-map">
	<h2>Built-In Mappings</h2>
		<table id="mappings">
			<thead>
				<tr>
					<th scope="col">Email Label</th>
					<th scope="col">Replacement</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>!@!UNSUBSCRIBE!@!</td>
					<td>
						This label will be replaced with an unsubcribe link.
					</td>
				</tr>
			</tbody>
		</table>
	<hr />
	<h2>Recipient Mappings</h2>
	<form action="{% url mailer-email-map email.id %}" method="post">
		<table id="mappings">
			<thead>
				<tr>
					<th scope="col">Email Label</th>
					<th scope="col">Recipient Attribute</th>
				</tr>
			</thead>
			<tbody>
				{% for form in forms %}
					{% if forloop.first %}
					{% endif %}
					<tr>
						<td>{{form.instance.email_label}}</td>
						<td>{{form.recipient_field}}</td>
					</tr>
				{% empty %}
				<td colspan="2">No email labels were detected.</td>
				{% endfor %}

			</tbody>
		</table>
		<button type="submit">Save Mappings</button>
		{% csrf_token %}
	</form>
	
</div>
{% endblock %}