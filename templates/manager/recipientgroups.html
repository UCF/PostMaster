{% extends 'base.html' %}
{% load widget_tweaks %}

{% block page-body %}

  <h2>
    Recipient Groups
    <a href="{% url 'manager-recipientgroup-create' %}" class="btn btn-default">
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add New</a>
  </h2>

  <div class="row">

    <div class="col-sm-6">
      {% if is_paginated %}
        <ul class="pagination pagination-sm">
          {% if page_obj.has_previous %}
          <li>
            <a href="?page={{page_obj.previous_page_number}}" class="prev">
              <span class="glyphicon glyphicon-chevron-left"></span>Prev</a>
          </li>
          {% endif %}
          <li class="disabled">
            <a href="#">{{page_obj.number}} of {{page_obj.paginator.num_pages}}</a>
          </li>
          {% if page_obj.has_next %}
          <li>
            <a href="?page={{page_obj.next_page_number}}" class="next">
              Next<span class="glyphicon glyphicon-chevron-right"></span></a>
          </li>
          {% endif %}
        </ul>
      {% endif %}
    </div>

    <div class="col-sm-6">
    	<form class="form-inline form-search pull-right" action="{% url 'manager-recipientgroups' %}" method="get">
        <div class="form-group">
          <div class="input-group">
            {{search_form.search_query|add_class:"form-control search-query"|attr:"required"|attr:"placeholder='Search for...'"}}
            <span class="input-group-btn">
              <button class="btn btn-primary" type="submit"><span class="glyphicon glyphicon-search" aria-hidden="true"></span><span class="sr-only">Search</span></button>
            </span>
          </div><!-- /input-group -->
        </div><!-- /form-group -->
    	</form>
    </div>

  </div>

  <table class="table table-striped table-hover">
  	<thead>
  		<tr>
  			<th scope="col"><a href="?sort=name&order={{order}}&search_query={{search_query}}">Name</a></th>
  			<th scope="col" class="col-sm-3"><a href="?sort=updated_at&order={{order}}&search_query={{search_query}}">Modified Date</a></th>
  			<th scope="col" class="col-sm-2 text-center">No. of Recipients</th>
  		</tr>
  	</thead>
    <tbody>
      {% for group in groups %}
      <tr data-link-url="{% url 'manager-recipientgroup-update' group.pk %}">
        <td>{{group.name}}</td>
        <td>{{group.updated_at}}</td>
        <td class="text-center">{{group.recipients.count}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if is_paginated %}
  <div>
    <ul class="pagination pagination-sm">
      {% if page_obj.has_previous %}
      <li>
        <a href="?page={{page_obj.previous_page_number}}" class="prev">
          <span class="glyphicon glyphicon-chevron-left"></span>Prev</a>
      </li>
      {% endif %}
      <li class="disabled">
        <a href="#">{{page_obj.number}} of {{page_obj.paginator.num_pages}}</a>
      </li>
      {% if page_obj.has_next %}
      <li>
        <a href="?page={{page_obj.next_page_number}}" class="next">
          Next<span class="glyphicon glyphicon-chevron-right"></span></a>
      </li>
      {% endif %}
    </ul>
  </div>
  {% endif %}

{% endblock %}
